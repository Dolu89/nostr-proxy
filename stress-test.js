// Shell command:
// for i in {1..10}; node stress-test.js;

const WebSocket = require('ws')

const socket = new WebSocket('ws://127.0.0.1:3333')
socket.on('open', () => {
  socket.send(
    '["REQ","timeline:pubkey:follows",{"authors":["3efdaebb1d8923ebd99c9e7ace3b4194ab45512e2be79c1b7d68d9243e0d2681","59b96df8d8b5e66b3b95a3e1ba159750a6edd69bcbba1857aeb652a5b208bd59","cd169bd8fbd5179e2a8d498ffc31d3ae0e40825ff2b8a85ea359c4455a107ca8","330fb1431ff9d8c250706bbcdc016d5495a3f744e047a408173e92ae7ee42dac","2a4ed0296680ed2e66ae9305218cf5fcf10b673a614c0b43e742b66be0c5ea3c","e25a8b2051022a08f97d267d4b99ddfc500a0bfe149a5f671e46f72e9ea36ec9","1c6b3be353041dd9e09bb568a4a92344e240b39ef5eb390f5e9e821273f0ae6f","50d94fc2d8580c682b071a542f8b1e31a200b0508bab95a33bef0855df281d63","65594f279a789982b55c02a38c92a99b986f891d2814c5f553d1bbfe3e23853d","b01ebe961561078f56b5d15c722c386da4a52f628a0f3a5bf74703489c65e735","89bfe407c647eb1888871f756516bb1906254fba3132d516ce9099614e37d10c","32e1827635450ebb3c5a7d12c1f8e7b2b514439ac10a67eef3d9fd9c5c68e245","686ef3aaa16170f305deb5ed08cadad1ee8e591fb107fa85216d52c33e211d36","1e020553bade21e260a025d1ff68aca1e5b3f809ae54bb41b0a4dd36f015201f","4b0572ab1f9a575415326b599f1179c20134bc23040d207156e71800b4ed33fe","6c8a01343a147b98956145bfc801ebf7e73fe992de0982c8bff7e1cbc7ded7ae","4f6728209e922fcf363fa5d20f17b1c16cb2d0a6d44eda02f2de730c907e3054","3bf0c63fcb93463407af97a5e5ee64fa883d107ef9e558472c4eb9aaaefa459d","82341f882b6eabcd2ba7f1ef90aad961cf074af15b9ef44a09f9d2a8fbfbe6a2","00000000827ffaa94bfea288c3dfce4422c794fbb96625b6b31e9049f729d700","8f6945b4726112826ac6abd56ec041c87d8bdc4ec02e86bb388a97481f372b97","dec0ded454ef3bcd93e68315d1404ed1a910e722ff0711a00eb8a25e1090c326","1b11ed41e815234599a52050a6a40c79bdd3bfa3d65e5d4a2c8d626698835d6d","fbf93cc2cc17bf48b0ded69982595f2ef35f0ea9c62844b4421375bac60ef688","6e468422dfb74a5738702a8823b9b28168abab8655faacb6853cd0ee15deee93","04c915daefee38317fa734444acee390a8269fe5810b2241e5e6dd343dfbecc9","b6dcdddf86675287d1a4e8620d92aa905c258d850bf8cc923d39df1edfee5ee7","1bd022782bc6701dca51e32b631317083268ca8ac9c4561111013d266184e2b8","1e67de3754171071d3cf9b44b6e546bd94fd0a2ca3fb4dbbb1b054685c9116e4","4657dfe8965be8980a93072bcfb5e59a65124406db0f819215ee78ba47934b3e"],"kinds":[1,6],"since":1676371350,"until":1676374950}]'
  )
})
socket.on('message', (data) => {
  socket.close()
})
